import React, { Component } from 'react';
import './App.css';
import InputFields from './InputFields'
const htmlparser = require('fast-html-parser');
const HtmlToReactParser = require('html-to-react').Parser;
const htmlToReactParser = new HtmlToReactParser();

class App extends Component {
    constructor(props) {
        super(props);
        this.state = {
            sampleClause: `
<div class="doc-margins"><div class="hide_document"><a id="viewFullContract" href="#">View full contract</a></div><div class="dat_clause_language ui-droppable" clause-id="145763" cat-id="0"><p class="dat_snippet" clause-id="145763"><bucket class="mceNonEditable" id="145763"></bucket><i>&lt;&lt;&lt; DISCLAIMERThis document is protected by copyright at Clausehound Inc. Please note that developments in case law may not be reflected in this version of this document.This database is provided for informational purposes only and does not create lawyer client relationship with the reader. Clausehound Inc. does not provide legal advice, nor should any advice from Clausehound Inc. be construed as such. The material contained in clausehound.com is intended to provide general information on a particular subject or subjects and is not an exhaustive treatment of such subjects. The site is no substitute for the advice of a qualified lawyer, who should be consulted where expert advice or matter-specific advice is required. Copying, downloading, or use of any content on clausehound.com in any way, does not create a lawyer-client relationship. Any reliance on the information is solely at your own risk. The information provided on this website may not be relevant to your jurisdiction, and the law may have changed in your jurisdiction since the initial publication of information in this database.How to use this document: Edit the document as desired. Replace the highlighted items with information that is specific to the contract that you are drafting or desire to enter into. The highlighted text will contain suggestions or alternatives, please consider which options are appropriate for your specific situation. Highlighted text that is not removed before sharing this document with your counterparty will indicate that there are unresolved decisions.&gt;&gt;&gt;DISCLAIMER</i></p><div class="diff_check" clause-id="145763"></div><a title="Edit" class="edit_this_clause" href="#" clause-id="145763"><i class="fa fa-pencil" aria-hidden="true"></i></a><a title="Comment" class="comment_on_this_clause" href="#" clause-id="145763"><i class="fa fa-comment" aria-hidden="true"></i></a></div><div class="dat_clause_language ui-droppable" clause-id="145767" cat-id="7057"><p class="dat_snippet" clause-id="145767"><bucket class="mceNonEditable" id="145767"></bucket>This non-disclosure agreement (the “<b>Agreement</b>”) is dated as of <span class="mark">[∙]</span> (the “<b>Effective Date</b>”)<i> </i>between <span class="mark">[∙]</span> (the<b> “Company”</b>) and <span class="mark">[∙, an individual/corporation]</span><i><b> </b></i>located at <span class="mark">[INSERT ADDRESS]</span> (the “<b>Recipient</b>”, and together with the Company, each, individually a “<b>Party</b>” and collectively the “<b>Parties</b>”).<a class="variant-paw mceNonEditable" data-id="7057"></a></p><div class="diff_check" clause-id="145767"></div><a title="Edit" class="edit_this_clause" href="#" clause-id="145767"><i class="fa fa-pencil" aria-hidden="true"></i></a><a title="Comment" class="comment_on_this_clause" href="#" clause-id="145767"><i class="fa fa-comment" aria-hidden="true"></i></a></div><div class="dat_clause_language ui-droppable" clause-id="145768" cat-id="0"><p class="dat_snippet" clause-id="145768"><bucket class="mceNonEditable" id="145768"></bucket><b>Recitals </b></p><div class="diff_check" clause-id="145768"></div><a title="Edit" class="edit_this_clause" href="#" clause-id="145768"><i class="fa fa-pencil" aria-hidden="true"></i></a><a title="Comment" class="comment_on_this_clause" href="#" clause-id="145768"><i class="fa fa-comment" aria-hidden="true"></i></a></div><div class="dat_clause_language ui-droppable" clause-id="145769" cat-id="0"><p class="dat_snippet" clause-id="145769"><bucket class="mceNonEditable" id="145769"></bucket>The Company is in the business of <span class="mark">[insert Company's business]</span> (the “<b>Business of the Company</b>”). The Company desires to disclose certain confidential and sensitive information to the Recipient and the Recipient desires to receive such confidential information from the Company, for the purpose of <span class="mark">[insert purpose]</span> (the "<b>Purpose</b>"), on the terms and conditions contained herein.</p><div class="diff_check" clause-id="145769"></div><a title="Edit" class="edit_this_clause" href="#" clause-id="145769"><i class="fa fa-pencil" aria-hidden="true"></i></a><a title="Comment" class="comment_on_this_clause" href="#" clause-id="145769"><i class="fa fa-comment" aria-hidden="true"></i></a></div><div class="dat_clause_language ui-droppable" clause-id="145770" cat-id="10048"><p class="dat_snippet" clause-id="145770"><bucket class="mceNonEditable" id="145770"></bucket>In consideration of the above recitals and the mutual agreements contained in this Agreement, the receipt and adequacy of which are hereby acknowledged, the Parties agree as follows:<a class="variant-paw mceNonEditable" data-id="10048"></a></p><div class="diff_check" clause-id="145770"></div><a title="Edit" class="edit_this_clause" href="#" clause-id="145770"><i class="fa fa-pencil" aria-hidden="true"></i></a><a title="Comment" class="comment_on_this_clause" href="#" clause-id="145770"><i class="fa fa-comment" aria-hidden="true"></i></a></div><div class="dat_clause_language ui-droppable" clause-id="145771" cat-id="4199"><p class="dat_snippet" clause-id="145771"><bucket class="mceNonEditable" id="145771"></bucket><ol style="border-style: solid; margin-left: 0px; list-style-type: decimal;"><li style="border-style: none; margin-left: 2em; list-style-type: decimal;" value="1" data-zp="-1" data-zi="0" data-z="1" data-ilvl="0" data-num="1"><b>DEFINITION OF CONFIDENTIAL INFORMATION: </b>The Recipient will receive, or have access to, information of an extremely confidential nature during the term of this Agreement relating to the Company and its prospective clients, including but not limited to the financial data, business plans, marketing data and plans, current and prospective client information, pricing and sales policies and concepts, financial information, trade secrets, disclosures, technical information, software <span class="mark">[include any additional items to be classified as confidential information items] </span>(individually and collectively referred to as the “<b>Confidential Information</b>”).<b> </b><a class="variant-paw" data-id="4199"></a></li></ol></p><div class="diff_check" clause-id="145771"></div><a title="Edit" class="edit_this_clause" href="#" clause-id="145771"><i class="fa fa-pencil" aria-hidden="true"></i></a><a title="Comment" class="comment_on_this_clause" href="#" clause-id="145771"><i class="fa fa-comment" aria-hidden="true"></i></a></div><div class="dat_clause_language ui-droppable" clause-id="145772" cat-id="7233"><p class="dat_snippet" clause-id="145772"><bucket class="mceNonEditable" id="145772"></bucket><ol style="border-style: solid; margin-left: 0px; list-style-type: decimal;"><li style="border-style: none; margin-left: 2em; list-style-type: decimal;" value="2" data-zp="0" data-zi="0" data-z="1" data-ilvl="0" data-num="1"><b>HANDLING OF CONFIDENTIAL INFORMATION: </b>The Recipient agrees that any and all Confidential Information furnished to the Recipient by the Company or its representatives (“<b>Representatives</b>” are limited to <span class="mark">[only those directors and officers of a recipient that is a company, and employees, agents, accountants, legal counsel, lenders, and consultants and financial advisors of the recipient who are required to receive the information in order to fulfil the Purpose)]</span>, whether before or after the date of this Agreement, together with any reports, analyses, compilations, memoranda, notes and any other writings (including, without limitation, any such materials in written form, magnetically encoded or in any other form of media) prepared by or for the Recipient or its Representatives which contain, reflect, review or are based in whole or in part upon Confidential Information (the "<b>Confidential Media</b>"), will be held strictly confidential, and will not be used by the Recipient for any reason other than the Purpose, or reproduced by the Recipient, except as is expressly permitted by the terms of this Agreement. Recipient agrees to hold all confidential or proprietary information in the strictest confidence and not to disclose it to any person, firm or corporation or to use it except as necessary in carrying out the Purpose for the Company in a manner consistent with the Company's agreement(s)<span class="mark">[with the recipient][insert specific agreements as applicable]</span>.<a class="variant-paw nocategory" data-id="7233"></a></li></ol></p><div class="diff_check" clause-id="145772"></div><a title="Edit" class="edit_this_clause" href="#" clause-id="145772"><i class="fa fa-pencil" aria-hidden="true"></i></a><a title="Comment" class="comment_on_this_clause" href="#" clause-id="145772"><i class="fa fa-comment" aria-hidden="true"></i></a></div><div class="dat_clause_language ui-droppable" clause-id="145773" cat-id="7233"><p class="dat_snippet" clause-id="145773"><bucket class="mceNonEditable" id="145773"></bucket><ol style="border-style: solid; margin-left: 0px; list-style-type: decimal;"><li style="border-style: none; margin-left: 2em; list-style-type: decimal;" value="3" data-zp="0" data-zi="0" data-z="1" data-ilvl="0" data-num="1"><b>GENERAL DUTY NOT TO DISCLOSE:</b> Recipient shall keep the information confidential and shall not, except as is expressly permitted by the terms of this Agreement or as may be consented to in writing by the Company, disclose the information or any part thereof in any manner whatsoever, or directly or indirectly use the information or any part thereof for any purpose, other than carrying out the Purpose for the Company in a manner consistent with the Company's agreement(s) <span class="mark">[with the Recipient][INSERT ADDITIONAL AGREEMENTS]</span>. The Recipient understands and acknowledges that he or she is under a legal duty to respect the confidentiality of the Confidential Information.<a class="variant-paw nocategory" data-id="7233"></a></li></ol></p><div class="diff_check" clause-id="145773"></div><a title="Edit" class="edit_this_clause" href="#" clause-id="145773"><i class="fa fa-pencil" aria-hidden="true"></i></a><a title="Comment" class="comment_on_this_clause" href="#" clause-id="145773"><i class="fa fa-comment" aria-hidden="true"></i></a></div><div class="dat_clause_language ui-droppable" clause-id="145774" cat-id="15391"><p class="dat_snippet" clause-id="145774"><bucket class="mceNonEditable" id="145774"></bucket><ol style="border-style: solid; margin-left: 0px; list-style-type: decimal;"><li style="border-style: none; margin-left: 2em; list-style-type: decimal;" value="4" data-zp="0" data-zi="0" data-z="1" data-ilvl="0" data-num="1"><b>DISSEMINATION AUTHORISED TO REPRESENTATIVES: </b>The Recipient shall only disclose Confidential Information or Confidential Media to its <span class="mark">[include directors, officers, for non-individual Recipients]</span> Representatives who need to know such Confidential Information in connection with the Agreement or Purpose, provided such Representatives are informed of the confidential nature of such Confidential Information, and agree to enter into an agreement to use and handle the Confidential Information only for the purpose and with the same or greater care as is required in this Agreement, and with obligations that are the same as or more stringent than those set out herein. The Recipient agrees to use its best efforts to ensure that no person other than a Representative is able to gain access to any Confidential Information or Confidential Media.<b> </b><a class="variant-paw nocategory" data-id="15391"></a></li></ol></p><div class="diff_check" clause-id="145774"></div><a title="Edit" class="edit_this_clause" href="#" clause-id="145774"><i class="fa fa-pencil" aria-hidden="true"></i></a><a title="Comment" class="comment_on_this_clause" href="#" clause-id="145774"><i class="fa fa-comment" aria-hidden="true"></i></a></div><div class="dat_clause_language ui-droppable" clause-id="145775" cat-id="15340"><p class="dat_snippet" clause-id="145775"><bucket class="mceNonEditable" id="145775"></bucket><ol style="border-style: solid; margin-left: 0px; list-style-type: decimal;"><li style="border-style: none; margin-left: 2em; list-style-type: decimal;" value="5" data-zp="0" data-zi="0" data-z="1" data-ilvl="0" data-num="1"><b>CONFIDENTIALITY OF THIS AGREEMENT ITSELF:</b> The Parties agree that the information obtained in connection with the negotiation and execution of this Agreement or the effectuation of the Purpose, including any information provided in accordance with the Agreement; and this Agreement itself, shall be deemed to be Confidential Information and governed by the terms of the Agreement.<a class="variant-paw" data-id="15340"></a></li></ol></p><div class="diff_check" clause-id="145775"></div><a title="Edit" class="edit_this_clause" href="#" clause-id="145775"><i class="fa fa-pencil" aria-hidden="true"></i></a><a title="Comment" class="comment_on_this_clause" href="#" clause-id="145775"><i class="fa fa-comment" aria-hidden="true"></i></a></div></div>
            `
        }
    }
    Parser = (clause) => {
        const root = htmlparser.parse(clause);
        return root.querySelectorAll('.mark').map((node,i) => {
            const textdata = node.childNodes[0].rawText
            return textdata;
        })
    }
    handleChange = (i,inputfield, e) => {
        var change = {};
        change[`${i}${inputfield}`] = e.target.value;
        this.setState(change);
        document.getElementsByClassName('mark')[i].innerHTML = e.target.value;
    }
    componentDidMount (){
        const inputFields = this.Parser(this.state.sampleClause);
        const newStateVars = {};
        inputFields.forEach((field,i)=>{
            newStateVars[`${i}${field}`] = '';
        })
        const allMarks = document.getElementsByClassName('mark');
        for (let i = 0; i < allMarks.length; i++) {
            allMarks[i].innerHTML = 'Field '+ i;
        }
        this.setState(Object.assign({},this.state,newStateVars))
    }
    render() {
        const { sampleClause } = this.state;
        const inputFields = this.Parser(sampleClause);
        const reactElement = htmlToReactParser.parse(sampleClause);
        return (
            <div className="App" >
                <div>
                    <h1>Clause Aid </h1>
                </div>
                <div className="container-fluid">
                    <div className="row">
                        <div className="col-md-3" > 
                            <InputFields 
                                inputFields={inputFields}
                                handleChange={this.handleChange}
                            />
                        </div> 
                        <div className="col-md-9" >
                            <div className="well">
                            {reactElement}
                            </div>
                        </div> 
                    </div> 
                </div> 
            </div>
        );
    }
}

export default App;